# üöÄ API –¥–ª—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

## ‚ú® –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ?

–ù–æ–≤—ã–π API endpoint –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∞–π—Ç–∞–º–∏ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.

**–û—Å–Ω–æ–≤–Ω–æ–π endpoint:** `/api/stream_chunks`

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### 1Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
python app.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

---

### 2Ô∏è‚É£ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:3000/api-test
```

–≠—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

---

### 3Ô∏è‚É£ –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –Ω–∞–ø—Ä—è–º—É—é

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (cURL):**

```bash
curl -X POST http://localhost:3000/api/stream_chunks \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ.",
    "language": "ru",
    "chunk_size": 15
  }'
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "success": true,
  "total_chunks": 2,
  "language": "ru",
  "chunks": [
    {
      "index": 0,
      "text": "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ.",
      "video_url": "/api/chunk/video/20251028_123456_000000_0",
      "audio_url": "/api/chunk/audio/20251028_123456_000000_0",
      "duration": 3.5
    }
  ]
}
```

---

### 4Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ

**–í–∏–¥–µ–æ:**
```bash
curl -o video.mp4 http://localhost:3000/api/chunk/video/20251028_123456_000000_0
```

**–ê—É–¥–∏–æ:**
```bash
curl -o audio.wav http://localhost:3000/api/chunk/audio/20251028_123456_000000_0
```

---

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

| URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| http://localhost:3000/ | –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –≤–∏–¥–µ–æ |
| http://localhost:3000/realtime | –†–µ–∞–ª—Ç–∞–π–º —Å—Ç—Ä–∏–º–∏–Ω–≥ —Å —á–∞–Ω–∫–∞–º–∏ |
| http://localhost:3000/api-test | **–ù–û–í–û–ï** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API |

---

## üîå API Endpoints

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/stream_chunks` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∞–Ω–∫–æ–≤ –≤–∏–¥–µ–æ+–∞—É–¥–∏–æ |
| GET | `/api/chunk/video/{id}` | –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ —á–∞–Ω–∫ |
| GET | `/api/chunk/audio/{id}` | –ü–æ–ª—É—á–∏—Ç—å –∞—É–¥–∏–æ —á–∞–Ω–∫ |
| GET | `/api/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ |
| POST | `/api/cleanup` | –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Python —Å–∫—Ä–∏–ø—Ç:

```bash
python test_api_integration.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
- ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —á–∞–Ω–∫–∏
- ‚úÖ –°–∫–∞—á–∞–µ—Ç –ø–µ—Ä–≤—ã–π —á–∞–Ω–∫
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤:
- **API_INTEGRATION.md** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API
- **test_api_integration.py** - –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ Python
- **templates/api_test.html** - –ü—Ä–∏–º–µ—Ä –≤–µ–±-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### JavaScript (Fetch)

```javascript
async function generateAvatar(text) {
  const response = await fetch('http://localhost:3000/api/stream_chunks', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ text, language: 'ru' })
  });
  
  const { chunks } = await response.json();
  return chunks;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const chunks = await generateAvatar("–ü—Ä–∏–≤–µ—Ç –º–∏—Ä!");
console.log(chunks);
```

### Python (requests)

```python
import requests

response = requests.post(
    'http://localhost:3000/api/stream_chunks',
    json={'text': '–ü—Ä–∏–≤–µ—Ç –º–∏—Ä!', 'language': 'ru'}
)

chunks = response.json()['chunks']
print(chunks)
```

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** http://localhost:3000
- üß™ **API —Ç–µ—Å—Ç:** http://localhost:3000/api-test
- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [API_INTEGRATION.md](API_INTEGRATION.md)

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
