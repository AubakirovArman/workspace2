# ‚úÖ API –¥–ª—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - –ì–û–¢–û–í–û!

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1Ô∏è‚É£ –ù–æ–≤—ã–π API Endpoint: `/api/stream_chunks`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏ —è–∑—ã–∫
- ‚úÖ –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 —Å–ª–æ–≤)
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ + –∞—É–¥–∏–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å URL'–∞–º–∏ –Ω–∞ —á–∞–Ω–∫–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 3 —è–∑—ã–∫–æ–≤: ru, kk, en

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
```json
POST /api/stream_chunks
{
  "text": "–í–∞—à —Ç–µ–∫—Å—Ç",
  "language": "ru",
  "chunk_size": 15
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "total_chunks": 3,
  "chunks": [
    {
      "index": 0,
      "text": "...",
      "video_url": "/api/chunk/video/...",
      "audio_url": "/api/chunk/audio/...",
      "duration": 3.5
    }
  ]
}
```

---

### 2Ô∏è‚É£ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Endpoints

- **GET** `/api/chunk/video/{chunk_id}` - –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ MP4
- **GET** `/api/chunk/audio/{chunk_id}` - –ü–æ–ª—É—á–∏—Ç—å –∞—É–¥–∏–æ WAV
- **GET** `/api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞

---

### 3Ô∏è‚É£ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**URL:** http://localhost:3000/api-test

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìù –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- üé¨ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–∞–Ω–∫–æ–≤
- üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ
- üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

---

### 4Ô∏è‚É£ Python —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç

**–§–∞–π–ª:** `test_api_integration.py`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python test_api_integration.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ API
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —á–∞–Ω–∫–∏
- –°–∫–∞—á–∏–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–π —á–∞–Ω–∫
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `./test_chunks/`

---

### 5Ô∏è‚É£ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:**

1. **API_INTEGRATION.md** (14 KB)
   - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API
   - –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è JS, Python, cURL
   - –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

2. **API_QUICKSTART.md** (4 KB)
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - –ö—Ä–∞—Ç–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã
   - –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã

3. **test_api_integration.py** (4 KB)
   - –ì–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
   - –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å API

4. **templates/api_test.html** (12 KB)
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
python app.py
```

### 2. –û—Ç–∫—Ä—ã—Ç—å –≤–µ–±-—Ç–µ—Å—Ç
```
http://localhost:3000/api-test
```

### 3. –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å Python —Ç–µ—Å—Ç
```bash
python test_api_integration.py
```

---

## üì° –ù–∞–≤–∏–≥–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üé≠ –ì–æ–≤–æ—Ä—è—â–∏–π –ê–≤–∞—Ç–∞—Ä                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ üì• –°–æ–∑–¥–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ üéôÔ∏è –†–µ–∞–ª—Ç–∞–π–º –æ–∑–≤—É—á–∫–∞           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ üîå API Test                    ‚îÇ ‚Üê –ù–û–í–û–ï!
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üí° –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### 1Ô∏è‚É£ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–µ–±-—Å–∞–π—Ç–æ–º
```javascript
const chunks = await fetch('/api/stream_chunks', {
  method: 'POST',
  body: JSON.stringify({ text: '–ü—Ä–∏–≤–µ—Ç!', language: 'ru' })
}).then(r => r.json());

// –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —á–∞–Ω–∫–∏
for (const chunk of chunks.chunks) {
  video.src = chunk.video_url;
  await video.play();
}
```

### 2Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```python
response = requests.post('http://localhost:3000/api/stream_chunks',
    json={'text': '–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...', 'language': 'ru'})

chunks = response.json()['chunks']

# –°–∫–∞—á–∞—Ç—å –≤—Å–µ —á–∞–Ω–∫–∏
for chunk in chunks:
    download_video(chunk['video_url'])
    download_audio(chunk['audio_url'])
```

### 3Ô∏è‚É£ –ß–∞—Ç-–±–æ—Ç —Å –∞–≤–∞—Ç–∞—Ä–æ–º
```javascript
async function botSpeaks(message) {
  const { chunks } = await generateChunks(message);
  for (const chunk of chunks) {
    await playVideoChunk(chunk.video_url);
  }
}
```

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 1 —á–∞–Ω–∫ (15 —Å–ª–æ–≤): ~4-6 —Å–µ–∫
- 100 —Å–ª–æ–≤ (~7 —á–∞–Ω–∫–æ–≤): ~28-42 —Å–µ–∫

**–§–æ—Ä–º–∞—Ç—ã:**
- –í–∏–¥–µ–æ: MP4, H.264, 25 FPS, 757x567px
- –ê—É–¥–∏–æ: WAV, 16kHz, mono, PCM

**–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞:**
- –§–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 1 —á–∞—Å

**CORS:**
- –í–∫–ª—é—á–µ–Ω –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:

- [x] API endpoint `/api/stream_chunks` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ —á–∞–Ω–∫–æ–≤ —Å lip-sync
- [x] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ —á–∞–Ω–∫–æ–≤
- [x] Endpoints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —á–∞–Ω–∫–æ–≤
- [x] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [x] Python —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç
- [x] –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- [x] –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (JS, Python, cURL)

---

## üéâ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∞–π—Ç–∞–º–∏!**

### –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏:
- üåê –ì–ª–∞–≤–Ω–∞—è: http://localhost:3000
- üß™ API Test: http://localhost:3000/api-test
- üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: API_INTEGRATION.md
- ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: API_QUICKSTART.md

---

**–ù–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–æ–≥–∞–ª, –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–∫–ª—é—á–∞–ª!** ‚ú®
