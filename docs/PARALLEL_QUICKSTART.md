# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /workspace/workspace2
pip install pydub torchaudio
```

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python app.py
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://localhost:3000/parallel_test
```

–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- ‚úÖ –°—Ä–∞–≤–Ω–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∏ –æ–±—ã—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º —Ç–µ–∫—Å—Ç–µ
- ‚úÖ –£–≤–∏–¥–µ—Ç—å —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 2. API –∑–∞–ø—Ä–æ—Å (curl)

```bash
# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–±—ã—Å—Ç—Ä–µ–µ)
curl -X POST http://localhost:3000/api/generate_parallel \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç –µ–≥–æ –Ω–∞ —á–∞—Å—Ç–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –¥–≤—É—Ö –º–æ–¥–µ–ª—è—Ö.",
    "language": "ru"
  }' \
  --output result_parallel.mp4

# –û–±—ã—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
curl -X POST http://localhost:3000/api/generate \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç –µ–≥–æ –Ω–∞ —á–∞—Å—Ç–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –¥–≤—É—Ö –º–æ–¥–µ–ª—è—Ö.",
    "language": "ru"
  }' \
  --output result_normal.mp4
```

### 3. Python —Å–∫—Ä–∏–ø—Ç

```python
import requests
import time

text = """
–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –°–µ–≥–æ–¥–Ω—è –º—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
–û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å–∫–æ—Ä–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–∏–¥–µ–æ –≤ –ø–æ–ª—Ç–æ—Ä–∞-–¥–≤–∞ —Ä–∞–∑–∞ –∑–∞ —Å—á—ë—Ç
–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π - GAN –∏ NOGAN.
"""

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
start = time.time()
response = requests.post(
    'http://localhost:3000/api/generate_parallel',
    json={'text': text, 'language': 'ru'}
)
parallel_time = time.time() - start

if response.status_code == 200:
    with open('parallel.mp4', 'wb') as f:
        f.write(response.content)
    print(f"‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è: {parallel_time:.2f}s")

# –û–±—ã—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
start = time.time()
response = requests.post(
    'http://localhost:3000/api/generate',
    json={'text': text, 'language': 'ru'}
)
normal_time = time.time() - start

if response.status_code == 200:
    with open('normal.mp4', 'wb') as f:
        f.write(response.content)
    print(f"‚úÖ –û–±—ã—á–Ω–∞—è: {normal_time:.2f}s")

# –†–µ–∑—É–ª—å—Ç–∞—Ç
speedup = normal_time / parallel_time
print(f"\nüöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ: {speedup:.2f}x")
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–µ –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:

```bash
curl http://localhost:3000/api/health
```

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```json
{
  "status": "ready",
  "gan_model_loaded": true,
  "nogan_model_loaded": true,
  ...
}
```

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ–∫—Å—Ç—ã (< 10s –∞—É–¥–∏–æ)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ –¥–∞—Å—Ç –≤—ã–∏–≥—Ä—ã—à–∞
- Overhead –æ—Ç —Ä–∞–∑–±–∏–µ–Ω–∏—è/—Å–∫–ª–µ–π–∫–∏ –º–æ–∂–µ—Ç –¥–∞–∂–µ –∑–∞–º–µ–¥–ª–∏—Ç—å

### –°—Ä–µ–¥–Ω–∏–µ —Ç–µ–∫—Å—Ç—ã (10-30s –∞—É–¥–∏–æ)
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 1.3-1.5x** ‚ö°
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞

### –î–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã (> 30s –∞—É–¥–∏–æ)
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 1.5-2x** üöÄ
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "–¢—Ä–µ–±—É—é—Ç—Å—è –æ–±–µ –º–æ–¥–µ–ª–∏"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
ls -lh /workspace/workspace2/Wav2Lip-SD-*.pt

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# Wav2Lip-SD-GAN.pt
# Wav2Lip-SD-NOGAN.pt
```

### "CUDA out of memory"
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π endpoint
curl -X POST http://localhost:3000/api/generate ...
```

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–∏ —Å–∫–ª–µ–π–∫–µ
- –û–±—ã—á–Ω–æ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç
- –ï—Å–ª–∏ –µ—Å—Ç—å - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `PARALLEL_PROCESSING.md`
