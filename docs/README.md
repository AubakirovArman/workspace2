# üé≠ –ì–æ–≤–æ—Ä—è—â–∏–π –ê–≤–∞—Ç–∞—Ä - –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

> **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏–¥–µ–æ —Å –≥–æ–≤–æ—Ä—è—â–∏–º –∞–≤–∞—Ç–∞—Ä–æ–º –∏–∑ –ª—é–±–æ–≥–æ —Ç–µ–∫—Å—Ç–∞!**  
> –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–∑–≤—É—á–∫–∞ ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—É–± ‚Üí –ì–æ—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ

![Status](https://img.shields.io/badge/status-ready-brightgreen)
![Python](https://img.shields.io/badge/python-3.8+-blue)
![Flask](https://img.shields.io/badge/flask-3.0-orange)
![PyTorch](https://img.shields.io/badge/pytorch-2.1-red)

## ‚ú® –ß—Ç–æ —ç—Ç–æ?

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ **Flask** —Å –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ **Wav2Lip** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ —Å –≥–æ–≤–æ—Ä—è—â–∏–º –∞–≤–∞—Ç–∞—Ä–æ–º:

1. üñºÔ∏è **–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∞–≤–∞—Ç–∞—Ä** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–∂–µ –≤ –ø–∞–º—è—Ç–∏
2. üß† **–ú–æ–¥–µ–ª–∏ –≤ –ø–∞–º—è—Ç–∏** - Wav2Lip –∏ Face Detection –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
3. ‚úçÔ∏è **–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞** - –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
4. üé§ **TTS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–∑–≤—É—á–∫–∞ (—Ä—É—Å—Å–∫–∏–π/–∫–∞–∑–∞—Ö—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
5. üé¨ **Lip-sync** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≥—É–± —Å –∞—É–¥–∏–æ
6. üì∫ **–†–µ–∑—É–ª—å—Ç–∞—Ç** - –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ –∑–∞ 15-30 —Å–µ–∫—É–Ω–¥!

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python3 check_system.py

# 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python app.py

# 3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
# http://localhost:3000
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `/workspace/avatar.jpg` - —Ñ–æ—Ç–æ –∞–≤–∞—Ç–∞—Ä–∞ (–µ—Å—Ç—å)
- ‚úÖ `/workspace/Wav2Lip-SD-GAN.pt` - –º–æ–¥–µ–ª—å (–µ—Å—Ç—å)
- ‚úÖ Python 3.8+ (–µ—Å—Ç—å)
- ‚úÖ ffmpeg (–µ—Å—Ç—å)

### Python –ø–∞–∫–µ—Ç—ã
```bash
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç:
pip install flask flask-cors requests torch opencv-python numpy
```

## üåê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   python app.py
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
   ```
   http://localhost:3000
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   - –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
   - –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ (üá∑üá∫ –†—É—Å—Å–∫–∏–π / üá∞üáø –ö–∞–∑–∞—Ö—Å–∫–∏–π / üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π)
   - –ù–∞–∂–º–∏—Ç–µ "üé§ –û–∑–≤—É—á–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –≤–∏–¥–µ–æ"
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ 15-30 —Å–µ–∫—É–Ω–¥
   - –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –≤–∏–¥–µ–æ!

### API (–ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –¥–æ—Å—Ç—É–ø)

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ

```bash
# curl
curl -X POST http://localhost:3000/api/generate \
  -H "Content-Type: application/json" \
  -d '{"text": "–ü—Ä–∏–≤–µ—Ç –º–∏—Ä!", "language": "ru"}' \
  --output result.mp4
```

```python
# Python
import requests

response = requests.post(
    'http://localhost:3000/api/generate',
    json={'text': '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!', 'language': 'ru'}
)

with open('avatar_video.mp4', 'wb') as f:
    f.write(response.content)
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
curl http://localhost:3000/api/health
```

```json
{
  "status": "ready",
  "models_loaded": true,
  "avatar_loaded": true,
  "device": "cuda"
}
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

| –≠—Ç–∞–ø | CPU | GPU | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-----|-----|------------|
| üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π (–æ–¥–∏–Ω —Ä–∞–∑) | 10-15s | 5-8s | –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ |
| üé§ TTS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è | 2-5s | 2-5s | –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å |
| üé¨ Lip-sync (10s –∞—É–¥–∏–æ) | 20-40s | 5-10s | –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ |
| ‚è±Ô∏è **–ò—Ç–æ–≥–æ –Ω–∞ –∑–∞–ø—Ä–æ—Å** | **25-50s** | **10-20s** | |

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏

- **–ë–µ–∑ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏**: 35-60s (–∑–∞–≥—Ä—É–∑–∫–∞ + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑)
- **–° –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–æ–π**: 10-30s (—Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞)
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ**: 2-3x –±—ã—Å—Ç—Ä–µ–µ!

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–º—è—Ç—å  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 3 —è–∑—ã–∫–æ–≤ (RU, KK, EN)  
‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚úÖ REST API  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è TTS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è  
‚úÖ GPU/CPU –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã  
‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ  
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏  

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/workspace/
‚îú‚îÄ‚îÄ app.py                    # Flask —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ avatar.jpg                # –ê–≤–∞—Ç–∞—Ä
‚îú‚îÄ‚îÄ Wav2Lip-SD-GAN.pt        # –ú–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ templates/               # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ modern-lipsync/          # –ú–æ–¥—É–ª–∏ Wav2Lip
‚îú‚îÄ‚îÄ outputs/                 # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îî‚îÄ‚îÄ temp_web/                # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md)

üìÅ **–ü–∞–ø–∫–∞ musor/** —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [QUICKSTART.md](QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- üìñ [README_WEB.md](README_WEB.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- üìñ [ARCHITECTURE.md](ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- üìñ [PROJECT_SUMMARY.md](PROJECT_SUMMARY.md) - –°–≤–æ–¥–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
python3 check_system.py
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
```bash
./start_web.sh
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏—Å—Ç–µ–º—É –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
python3 test_api.py
```
–¢–µ—Å—Ç–∏—Ä—É–µ—Ç API –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–±–Ω—ã–µ –≤–∏–¥–µ–æ.

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º—É
python3 check_system.py

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements_web.txt
```

### –û—à–∏–±–∫–∞ "Face not detected"
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–µ—Ç–∫–æ–µ —Ñ–æ—Ç–æ –ª–∏—Ü–∞
- –õ–∏—Ü–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ
- –•–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –Ω–∞ —Ñ–æ—Ç–æ

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU (–≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `python -c "import torch; print(torch.cuda.is_available())"`
- –ù–∞ CPU –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 30-50s

### TTS API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- API —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ https://tts.sk-ai.kz

### –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç
```python
# –í app.py –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç:
app.run(port=8080)  # –í–º–µ—Å—Ç–æ 3000
```

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
–ó–∞–º–µ–Ω–∏—Ç–µ `/workspace/avatar.jpg` –Ω–∞ —Å–≤–æ—ë —Ñ–æ—Ç–æ.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å
```python
# –í app.py:
CHECKPOINT_PATH = '/workspace/Wav2Lip-SD-NOGAN.pt'  # –ë—ã—Å—Ç—Ä–µ–µ
```

### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```python
# –í app.py - init_service():
lipsync_service = LipsyncService(
    ...
    face_det_batch_size=8,   # –ú–µ–Ω—å—à–µ = –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏
    wav2lip_batch_size=64    # –ú–µ–Ω—å—à–µ = –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏
)
```

## üìä API Endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/` | GET | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| `/api/generate` | POST | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ |
| `/api/health` | GET | –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ |
| `/api/avatar` | GET | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ |
| `/api/cleanup` | POST | –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ |

## üöÄ Production Deploy

### –° gunicorn
```bash
pip install gunicorn
gunicorn -w 2 -b 0.0.0.0:3000 --timeout 120 app:app
```

### –° nginx
```nginx
server {
    listen 80;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_read_timeout 120s;
    }
}
```

### Docker
```dockerfile
FROM python:3.9
WORKDIR /app
COPY requirements_web.txt .
RUN pip install -r requirements_web.txt
COPY . .
EXPOSE 3000
CMD ["python", "app.py"]
```

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:**
```bash
python app.py
```

**–ò –æ—Ç–∫—Ä–æ–π—Ç–µ:**
```
http://localhost:3000
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ [Wav2Lip](https://github.com/Rudrabha/Wav2Lip) by KR Prajwal et al.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã? –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. `python3 check_system.py` - –≤—Å–µ –ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ
2. –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `QUICKSTART.md` –∏ `README_WEB.md`

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –≥–æ–≤–æ—Ä—è—â–∏—Ö –∞–≤–∞—Ç–∞—Ä–æ–≤!**
