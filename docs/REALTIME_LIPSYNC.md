# üé¨ –†–µ–∞–ª—Ç–∞–π–º –æ–∑–≤—É—á–∫–∞ —Å Lip-Sync

## ‚ú® –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### –ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≥—É–±

–¢–µ–ø–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ **"–†–µ–∞–ª—Ç–∞–π–º –æ–∑–≤—É—á–∫–∞"** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

1. **–¢–µ–∫—Å—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ —á–∞–Ω–∫–∏** (10-15 —Å–ª–æ–≤)
2. **–ö–∞–∂–¥—ã–π —á–∞–Ω–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ:**
   - TTS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (~2-3s)
   - Lip-sync –æ–±—Ä–∞–±–æ—Ç–∫–∞ (~5-8s –Ω–∞ GPU)
   - –°–æ–∑–¥–∞–Ω–∏–µ MP4 –≤–∏–¥–µ–æ
3. **–í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ –º–µ—Ä–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
   - –ü–µ—Ä–≤—ã–π —á–∞–Ω–∫ –≥–æ—Ç–æ–≤ —á–µ—Ä–µ–∑ ~8-10 —Å–µ–∫—É–Ω–¥
   - –ü–æ–∫–∞ –∏–≥—Ä–∞–µ—Ç –ø–µ—Ä–≤—ã–π, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ
   - –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
–¢–µ–∫—Å—Ç: "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–≤–∞—Ç–∞—Ä."

‚Üì –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏

–ß–∞–Ω–∫ 1: "–ü—Ä–∏–≤–µ—Ç!"
–ß–∞–Ω–∫ 2: "–ö–∞–∫ –¥–µ–ª–∞?"
–ß–∞–Ω–∫ 3: "–ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–≤–∞—Ç–∞—Ä."

‚Üì –û–±—Ä–∞–±–æ—Ç–∫–∞

[–ß–∞–Ω–∫ 1] TTS (2s) + Lip-sync (6s) = 8s ‚Üí –í–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ!
         ‚Üì –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
         
[–ß–∞–Ω–∫ 2] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ...
         ‚Üì –ì–æ—Ç–æ–≤–æ! ‚Üí –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å
         
[–ß–∞–Ω–∫ 3] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ...
         ‚Üì –ì–æ—Ç–æ–≤–æ! ‚Üí –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å

‚Üì –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∞–≤–∞—Ç–∞—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å 
—á–µ—Ä–µ–∑ 8-10 —Å–µ–∫—É–Ω–¥ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫!
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

### –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (–æ–¥–Ω–æ –≤–∏–¥–µ–æ):
```
‚è±Ô∏è –ñ–¥–µ–º: 30-60 —Å–µ–∫—É–Ω–¥
üì∫ –°–º–æ—Ç—Ä–∏–º: –í—Å–µ —Å—Ä–∞–∑—É
```

### –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∞–ª—Ç–∞–π–º —á–∞–Ω–∫–∏):
```
‚è±Ô∏è –ñ–¥–µ–º: 8-10 —Å–µ–∫—É–Ω–¥ (–ø–µ—Ä–≤—ã–π —á–∞–Ω–∫)
üì∫ –°–º–æ—Ç—Ä–∏–º: –°—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
‚è±Ô∏è –û—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏: –ì–æ—Ç–æ–≤—è—Ç—Å—è –≤ —Ñ–æ–Ω–µ
üì∫ –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥: –ë–µ–∑ –ø–∞—É–∑ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏
```

## üí° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### Backend (`app.py`):
```python
@app.route('/api/generate_stream', methods=['POST'])
def generate_stream_chunk():
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ-—á–∞–Ω–∫ —Å lip-sync
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç MP4 —Ñ–∞–π–ª
```

### Frontend (`realtime.html`):
```javascript
// –û—á–µ—Ä–µ–¥—å –≤–∏–¥–µ–æ
let videoQueue = [];

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–∞
async function processChunk(text, lang, index) {
    const response = await fetch('/api/generate_stream', {
        body: JSON.stringify({ text, language: lang, chunk_index: index })
    });
    const videoBlob = await response.blob();
    videoQueue.push(videoBlob);
    playNextVideo(); // –ù–∞—á–∏–Ω–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
}

// –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
async function playNextVideo() {
    const videoBlob = videoQueue.shift();
    videoPlayer.src = URL.createObjectURL(videoBlob);
    // –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ - —Å–ª–µ–¥—É—é—â–∏–π —á–∞–Ω–∫
}
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ü–µ—Ä–≤—ã–π —á–∞–Ω–∫ | 8-10s –Ω–∞ GPU |
| –°–ª–µ–¥—É—é—â–∏–µ —á–∞–Ω–∫–∏ | 6-8s –Ω–∞ GPU |
| –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ | 10-15 —Å–ª–æ–≤ |
| –§–æ—Ä–º–∞—Ç | MP4, 25 FPS |

## üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:

1. **–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞:** "–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–≤–∞—Ç–∞—Ä. –Ø –º–æ–≥—É –≥–æ–≤–æ—Ä–∏—Ç—å."
2. **–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏:** "–ù–∞—á–∞—Ç—å —Ä–µ–∞–ª—Ç–∞–π–º –æ–∑–≤—É—á–∫—É"
3. **–°—Ç–∞—Ç—É—Å—ã:**
   - ‚úÇÔ∏è –†–∞–∑–±–∏–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏...
   - üé¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–∞ 1/3...
   - üé¨ –ê–≤–∞—Ç–∞—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å...
   - üé¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–∞ 2/3...
   - üé¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–∞ 3/3...
   - ‚úÖ –í—Å–µ —á–∞–Ω–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã!
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–ª–∞–≤–Ω–æ–µ –≤–∏–¥–µ–æ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≥—É–±!

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤:

### –†–µ–∂–∏–º "–°–æ–∑–¥–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å":
- ‚úÖ –û–¥–Ω–æ —Ü–µ–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
- ‚úÖ –ú–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å
- ‚è±Ô∏è –ñ–¥–∞—Ç—å: 15-30 —Å–µ–∫—É–Ω–¥
- üì∫ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

### –†–µ–∂–∏–º "–†–µ–∞–ª—Ç–∞–π–º –æ–∑–≤—É—á–∫–∞":
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (8-10s)
- ‚úÖ –ü–æ—Ç–æ–∫–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- ‚úÖ Lip-sync –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚è±Ô∏è –ù–∞—á–∞–ª–æ: 8-10 —Å–µ–∫—É–Ω–¥
- üì∫ –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:

### –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏:
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –ø–æ `.!?`
- –î–ª–∏–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (>15 —Å–ª–æ–≤) –¥—Ä–æ–±—è—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10-15 —Å–ª–æ–≤ (~3-5 —Å–µ–∫—É–Ω–¥ —Ä–µ—á–∏)

### –ë–∞—Ç—á–∏–Ω–≥:
- `face_det_batch_size = 8` (–±—ã—Å—Ç—Ä–µ–µ)
- `wav2lip_batch_size = 64` (–±—ã—Å—Ç—Ä–µ–µ)

### –û—á–∏—Å—Ç–∫–∞:
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –°—Ç–∞—Ä—ã–µ —á–∞–Ω–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

### –û—Ç–∫—Ä–æ–π—Ç–µ:
```
http://localhost:3000/realtime
```

### –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç:
```
–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–≤–∞—Ç–∞—Ä. 
–Ø –º–æ–≥—É –≥–æ–≤–æ—Ä–∏—Ç—å —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≥—É–± 
–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!
```

### –ù–∞–∂–º–∏—Ç–µ:
```
üéôÔ∏è –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª—Ç–∞–π–º –æ–∑–≤—É—á–∫—É
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ß–µ—Ä–µ–∑ 8-10 —Å–µ–∫—É–Ω–¥ –∞–≤–∞—Ç–∞—Ä –Ω–∞—á–Ω–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å
- –í–∏–¥–µ–æ –±—É–¥–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø–ª–∞–≤–Ω–æ
- –ë–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏
- –° –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≥—É–±!

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**
